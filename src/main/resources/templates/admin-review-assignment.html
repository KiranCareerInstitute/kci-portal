<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/admin-layout}">
<head>
    <title>Admin Dashboard</title>
</head>
<body>
<section layout:fragment="content">
    <div class="container mt-5">

        <!-- Page Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h4 class="mb-0">
                <i class="bi bi-journal-check me-2"></i> Review Assignment
            </h4>
        </div>

        <!-- Success Flash Message -->
        <div th:if="${message}" class="alert alert-success alert-dismissible fade show mb-4" role="alert">
            <i class="bi bi-check-circle-fill me-2"></i>
            <span th:text="${message}">Review submitted successfully!</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <!-- Error Flash Message -->
        <div th:if="${error}" class="alert alert-danger alert-dismissible fade show mb-4" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <span th:text="${error}">Something went wrong.</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <!-- Review Form Card -->
        <div class="card shadow-sm border-0">
            <div class="card-body p-4">
                <form th:action="@{'/admin/assignments/review/' + ${assignment.id}}"
                      method="post" enctype="multipart/form-data">

                    <!-- Student Name -->
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label fw-semibold">üë§ Student:</label>
                        <div class="col-sm-10 pt-2" th:text="${assignment.user.fullName}">
                            Student Name
                        </div>
                    </div>

                    <!-- Assignment Title -->
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label fw-semibold">üìå Title:</label>
                        <div class="col-sm-10 pt-2" th:text="${assignment.title}">
                            Assignment Title
                        </div>
                    </div>

                    <!-- Assignment Description -->
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label fw-semibold">üìù Description:</label>
                        <div class="col-sm-10 pt-2" th:text="${assignment.description}">
                            Assignment Description
                        </div>
                    </div>

                    <!-- Submission File -->
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label fw-semibold">üìÅ Submission:</label>
                        <div class="col-sm-10 pt-2">
                            <a th:href="@{'/uploads/assignment/' + ${assignment.filePath}}"
                               target="_blank" download class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-download me-1"></i>Download Submission
                            </a>
                        </div>
                    </div>

                    <!-- Upload Solution -->
                    <div class="mb-3 row">
                        <label for="solutionFile" class="col-sm-2 col-form-label fw-semibold">üì§ Upload Solution:</label>
                        <div class="col-sm-10">
                            <input type="file" name="solutionFile" id="solutionFile"
                                   accept=".pdf,.zip" class="form-control" required>
                            <small class="text-muted">Only PDF or ZIP files allowed</small>
                        </div>
                    </div>

                    <!-- Feedback -->
                    <div class="mb-4 row">
                        <label for="feedback" class="col-sm-2 col-form-label fw-semibold">üí¨ Feedback:</label>
                        <div class="col-sm-10">
                            <textarea name="feedback" id="feedback" class="form-control"
                                      rows="4" placeholder="Write feedback here..." required></textarea>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="/admin/assignments" class="btn btn-secondary">
                            <i class="bi bi-arrow-left me-1"></i> Back
                        </a>
                        <a href="/admin/videos" class="btn btn-secondary">
                            <i class="bi bi-camera-video me-1"></i> Video Solutions
                        </a>
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-check-circle me-1"></i> Submit Review
                        </button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</section>
</body>
</html>
